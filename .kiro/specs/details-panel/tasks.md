# Implementation Tasks: Details Panel

- [x] 1. Extend type definitions
  - [x] 1.1 Add details property to Action type
    - Add `details?: (item?: any) => React.ReactElement` property to Action interface in `packages/rua-ui/src/command/types.ts`
    - _Requirements: 3.1_
  - [x] 1.2 Add details panel props to CommandPaletteProps
    - Add `isShowDetails?: boolean` prop to CommandPaletteProps in `packages/rua-ui/src/simple/types.ts`
    - Add `detailsRatio?: "1:1" | "1:2" | "1:3" | "2:3"` prop to CommandPaletteProps
    - _Requirements: 1.1, 1.2, 1.3, 2.1, 2.2, 2.3_

- [x] 2. Create DetailsPanel component
  - [x] 2.1 Create DetailsPanel component file
    - Create `packages/rua-ui/src/command/DetailsPanel.tsx`
    - Implement DetailsPanelProps interface with `action`, `emptyView`, `className` props
    - Render action's details content or emptyView when no details
    - Add smooth transition animations for content changes
    - _Requirements: 3.1, 3.2, 3.3, 4.1_
  - [x] 2.2 Add DetailsPanel styles
    - Add CSS styles for details panel in `packages/rua-ui/src/styles/command.css`
    - Add CSS variables for border and background colors
    - Add transition animations for panel appearance and content changes
    - _Requirements: 4.1, 4.2, 4.3_
  - [x] 2.3 Export DetailsPanel from command module
    - Export DetailsPanel component from `packages/rua-ui/src/command/index.ts`
    - _Requirements: N/A (infrastructure)_

- [x] 3. Implement split layout in CommandPalette
  - [x] 3.1 Add ratio calculation utility
    - Create utility function to convert ratio string to width percentages
    - Handle "1:1" (50%/50%), "1:2" (33.33%/66.67%), "1:3" (25%/75%), "2:3" (40%/60%)
    - Default to "1:2" if invalid ratio provided
    - _Requirements: 2.1, 2.2, 2.3, 2.4_
  - [x] 3.2 Integrate DetailsPanel into CommandPalette
    - Modify `packages/rua-ui/src/simple/CommandPalette.tsx` to support split layout
    - When `isShowDetails` is true, render list and DetailsPanel side by side
    - Pass current active action to DetailsPanel
    - Pass emptyState to DetailsPanel for empty details view
    - Apply width percentages based on detailsRatio
    - _Requirements: 1.1, 1.2, 1.3, 3.1, 3.2, 3.3_
  - [x] 3.3 Add layout transition animations
    - Add smooth animation when toggling isShowDetails
    - Add slide-in animation for details panel appearance
    - _Requirements: 4.2, 4.3_

- [x] 4. Checkpoint
  - Ensure all tests pass, ask the user if questions arise.

- [ ]* 5. Property-based tests
  - [ ]* 5.1 Test split ratio calculation
    - **Feature: details-panel, Property 1: Split ratio determines layout widths**
    - Test that ratio calculation returns correct percentages for all valid ratios
    - Test that invalid ratios default to "1:2"
    - _Requirements: 2.1, 2.2, 2.3, 2.4_
  - [ ]* 5.2 Test details content rendering
    - **Feature: details-panel, Property 2: Details content matches selected action**
    - Test that DetailsPanel renders action's details function result
    - Test that emptyView is shown when action has no details
    - _Requirements: 3.1, 3.2, 3.3_
  - [ ]* 5.3 Test panel visibility
    - **Feature: details-panel, Property 3: isShowDetails controls panel visibility**
    - Test that panel is visible only when isShowDetails is true
    - Test that panel is hidden when isShowDetails is false or undefined
    - _Requirements: 1.1, 1.2_
